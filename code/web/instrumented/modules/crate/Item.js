var cov_16txj39m8w = function () {
  var path = "/Users/abhijeet.daspatnaik/Documents/projects/crate-abhidp/code/web/src/modules/crate/Item.js";
  var hash = "7f5fdcc1c212b5f70ebbf22c5770526020b2d6d9";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/abhijeet.daspatnaik/Documents/projects/crate-abhidp/code/web/src/modules/crate/Item.js",
    statementMap: {
      "0": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 24,
          column: 16
        }
      },
      "1": {
        start: {
          line: 26,
          column: 4
        },
        end: {
          line: 28,
          column: 5
        }
      },
      "2": {
        start: {
          line: 31,
          column: 21
        },
        end: {
          line: 60,
          column: 3
        }
      },
      "3": {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 34,
          column: 6
        }
      },
      "4": {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 36,
          column: 57
        }
      },
      "5": {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 59,
          column: 8
        }
      },
      "6": {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 46,
          column: 9
        }
      },
      "7": {
        start: {
          line: 41,
          column: 10
        },
        end: {
          line: 41,
          column: 65
        }
      },
      "8": {
        start: {
          line: 43,
          column: 10
        },
        end: {
          line: 43,
          column: 60
        }
      },
      "9": {
        start: {
          line: 45,
          column: 10
        },
        end: {
          line: 45,
          column: 64
        }
      },
      "10": {
        start: {
          line: 49,
          column: 8
        },
        end: {
          line: 49,
          column: 99
        }
      },
      "11": {
        start: {
          line: 52,
          column: 8
        },
        end: {
          line: 54,
          column: 10
        }
      },
      "12": {
        start: {
          line: 56,
          column: 8
        },
        end: {
          line: 58,
          column: 16
        }
      },
      "13": {
        start: {
          line: 57,
          column: 10
        },
        end: {
          line: 57,
          column: 34
        }
      },
      "14": {
        start: {
          line: 63,
          column: 38
        },
        end: {
          line: 63,
          column: 54
        }
      },
      "15": {
        start: {
          line: 64,
          column: 26
        },
        end: {
          line: 64,
          column: 36
        }
      },
      "16": {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 89,
          column: 5
        }
      },
      "17": {
        start: {
          line: 94,
          column: 0
        },
        end: {
          line: 99,
          column: 1
        }
      },
      "18": {
        start: {
          line: 103,
          column: 2
        },
        end: {
          line: 105,
          column: 3
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 23,
            column: 2
          },
          end: {
            line: 23,
            column: 3
          }
        },
        loc: {
          start: {
            line: 23,
            column: 21
          },
          end: {
            line: 29,
            column: 3
          }
        },
        line: 23
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 31,
            column: 21
          },
          end: {
            line: 31,
            column: 22
          }
        },
        loc: {
          start: {
            line: 31,
            column: 34
          },
          end: {
            line: 60,
            column: 3
          }
        },
        line: 31
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 39,
            column: 12
          },
          end: {
            line: 39,
            column: 13
          }
        },
        loc: {
          start: {
            line: 39,
            column: 24
          },
          end: {
            line: 47,
            column: 7
          }
        },
        line: 39
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 48,
            column: 13
          },
          end: {
            line: 48,
            column: 14
          }
        },
        loc: {
          start: {
            line: 48,
            column: 22
          },
          end: {
            line: 50,
            column: 7
          }
        },
        line: 48
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 51,
            column: 12
          },
          end: {
            line: 51,
            column: 13
          }
        },
        loc: {
          start: {
            line: 51,
            column: 18
          },
          end: {
            line: 59,
            column: 7
          }
        },
        line: 51
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 56,
            column: 26
          },
          end: {
            line: 56,
            column: 27
          }
        },
        loc: {
          start: {
            line: 56,
            column: 32
          },
          end: {
            line: 58,
            column: 9
          }
        },
        line: 56
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 62,
            column: 2
          },
          end: {
            line: 62,
            column: 3
          }
        },
        loc: {
          start: {
            line: 62,
            column: 11
          },
          end: {
            line: 90,
            column: 3
          }
        },
        line: 62
      },
      "7": {
        name: "itemState",
        decl: {
          start: {
            line: 102,
            column: 9
          },
          end: {
            line: 102,
            column: 18
          }
        },
        loc: {
          start: {
            line: 102,
            column: 26
          },
          end: {
            line: 106,
            column: 1
          }
        },
        line: 102
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 40,
            column: 8
          },
          end: {
            line: 46,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 40,
            column: 8
          },
          end: {
            line: 46,
            column: 9
          }
        }, {
          start: {
            line: 40,
            column: 8
          },
          end: {
            line: 46,
            column: 9
          }
        }],
        line: 40
      },
      "1": {
        loc: {
          start: {
            line: 40,
            column: 12
          },
          end: {
            line: 40,
            column: 67
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 40,
            column: 12
          },
          end: {
            line: 40,
            column: 32
          }
        }, {
          start: {
            line: 40,
            column: 36
          },
          end: {
            line: 40,
            column: 67
          }
        }],
        line: 40
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    _coverageSchema: "43e27e138ebf9cfc5966b082cf9a028302ed4184",
    hash: "7f5fdcc1c212b5f70ebbf22c5770526020b2d6d9"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return coverage[path] = coverageData;
}();

// Imports
import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import { connect } from 'react-redux';
import { Link, withRouter } from 'react-router-dom'; // UI Imports

import Card from '../../ui/card/Card';
import Button from '../../ui/button/Button';
import H4 from '../../ui/typography/H4';
import Icon from '../../ui/icon';
import { white, grey2, black } from '../../ui/common/colors'; // App Imports

import { APP_URL } from '../../setup/config/env';
import userRoutes from '../../setup/routes/user';
import { messageShow, messageHide } from '../common/api/actions';
import { create } from '../subscription/api/actions'; // Component

class Item extends PureComponent {
  constructor(props) {
    cov_16txj39m8w.f[0]++;
    cov_16txj39m8w.s[0]++;
    super(props);
    cov_16txj39m8w.s[1]++;
    this.state = {
      isLoading: false
    };
  }

  onClickSubscribe = (cov_16txj39m8w.s[2]++, crateId => {
    cov_16txj39m8w.f[1]++;
    cov_16txj39m8w.s[3]++;
    this.setState({
      isLoading: true
    });
    cov_16txj39m8w.s[4]++;
    this.props.messageShow('Subscribing, please wait...');
    cov_16txj39m8w.s[5]++;
    this.props.create({
      crateId
    }).then(response => {
      cov_16txj39m8w.f[2]++;
      cov_16txj39m8w.s[6]++;

      if ((cov_16txj39m8w.b[1][0]++, response.data.errors) && (cov_16txj39m8w.b[1][1]++, response.data.errors.length > 0)) {
        cov_16txj39m8w.b[0][0]++;
        cov_16txj39m8w.s[7]++;
        this.props.messageShow(response.data.errors[0].message);
      } else {
        cov_16txj39m8w.b[0][1]++;
        cov_16txj39m8w.s[8]++;
        this.props.messageShow('Subscribed successfully.');
        cov_16txj39m8w.s[9]++;
        this.props.history.push(userRoutes.subscriptions.path);
      }
    }).catch(error => {
      cov_16txj39m8w.f[3]++;
      cov_16txj39m8w.s[10]++;
      this.props.messageShow('There was some error subscribing to this crate. Please try again.');
    }).then(() => {
      cov_16txj39m8w.f[4]++;
      cov_16txj39m8w.s[11]++;
      this.setState({
        isLoading: false
      });
      cov_16txj39m8w.s[12]++;
      window.setTimeout(() => {
        cov_16txj39m8w.f[5]++;
        cov_16txj39m8w.s[13]++;
        this.props.messageHide();
      }, 5000);
    });
  });

  render() {
    cov_16txj39m8w.f[6]++;
    const {
      id,
      name,
      description
    } = (cov_16txj39m8w.s[14]++, this.props.crate);
    const {
      isLoading
    } = (cov_16txj39m8w.s[15]++, this.state);
    cov_16txj39m8w.s[16]++;
    return <Card style={{
      width: '18em',
      backgroundColor: white
    }}>
        <p style={{
        padding: '2em 3em 0 3em'
      }}>
          <img src={`${APP_URL}/images/crate.png`} alt={name} style={{
          width: '100%'
        }} />
        </p>

        <div style={{
        padding: '1em 1.2em'
      }}>
          <H4 font="secondary" style={{
          color: black
        }}>{name}</H4>

          <p style={{
          color: grey2,
          marginTop: '1em'
        }}>{description}</p>

          <p style={{
          textAlign: 'center',
          marginTop: '1.5em',
          marginBottom: '1em'
        }}>
            <Button theme="primary" onClick={this.onClickSubscribe.bind(this, id)} type="button" disabled={isLoading}>
              <Icon size={1.2} style={{
              color: white
            }}>add</Icon> Subscribe
            </Button>
          </p>
        </div>
      </Card>;
  }

} // Component Properties


cov_16txj39m8w.s[17]++;
Item.propTypes = {
  crate: PropTypes.object.isRequired,
  user: PropTypes.object.isRequired,
  messageShow: PropTypes.func.isRequired,
  messageHide: PropTypes.func.isRequired
}; // Component State

function itemState(state) {
  cov_16txj39m8w.f[7]++;
  cov_16txj39m8w.s[18]++;
  return {
    user: state.user
  };
}

export default connect(itemState, {
  create,
  messageShow,
  messageHide
})(withRouter(Item));